<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C·ªïng c·ª• NKS</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="images/apache_orc_logo_icon_167862.png" type="image/x-icon">
</head>

<body class="dark-dashboard-mode">

    <header class="navbar">
        <div class="logo-area">
            <img src="images/apache_orc_logo_icon_167862.png" alt="Logo" class="nav-icon">
            <h1>C·ªïng c·ª• NKS</h1>
            <span class="sub-title">B·∫£ng ƒëi·ªÅu khi·ªÉn</span>
        </div>
        <div class="user-status">
            <span class="status-dot active"></span> ƒêang ho·∫°t ƒë·ªông
            <button class="btn btn-logout">ƒêƒÉng xu·∫•t</button>
        </div>
    </header>

    <main class="dashboard-main-content">
        <div class="greeting-section">
            <h2>Xin ch√†o!</h2>
            <p>Ch·ªçn ch·ª©c nƒÉng b√™n d∆∞·ªõi. T√¨m ki·∫øm ho·∫∑c l·ªçc ƒë·ªÉ nhanh ch√≥ng t√¨m th·∫•y t√≠nh nƒÉng.</p>
            <input type="text" placeholder="T√¨m ch·ª©c nƒÉng (v√≠ d·ª•: ƒë·ªãnh d·∫°ng, th·ªëng k√™)..." class="search-bar">
        </div>

        <div class="card-grid">
            <!-- ƒê·ªãnh d·∫°ng ng√†y gi·ªù  -->
            <div class="function-card">
                <div class="card-header">
                    <img src="images/time.png" alt="Icon" class="card-icon">
                    <h3>ƒê·ªãnh d·∫°ng ng√†y gi·ªù</h3>
                </div>
                <p class="card-description">C√†i ƒë·∫∑t l·∫°i tr·∫°ng th√°i DateTime c·ªßa Windows.</p>
                <div class="card-actions">
                    <a href="#" class="link-guide">H∆∞·ªõng d·∫´n</a>
                    <button class="btn btn-primary btn-download">T·∫£i xu·ªëng</button>
                </div>
            </div>

            <!-- Kh·ªüi t·∫°o l·∫°i t√†i kho·∫£n admin  -->
            <div class="function-card">
                <div class="card-header">
                    <img src="images/icons8-user-60.png" alt="Icon" class="card-icon">
                    <h3>T·∫°o l·∫°i Admin</h3>
                </div>
                <p class="card-description">T·∫°o l·∫°i User Admin khi m·∫•t t√†i kho·∫£n g·ªëc.</p>
                <div class="card-actions">
                    <a href="#" class="link-guide">H∆∞·ªõng d·∫´n</a>
                    <!-- Chuy·ªÉn sang trang SQL_Server_Connection.html -->
                    <button class="btn btn-primary btn-download" onclick="goToCreateAdminPage()">T·∫°o ngay</button>
                </div>
            </div>

            <!-- ƒê·ªï danh s√°ch b·ªánh nh√¢n  -->
            <div class="function-card">
                <div class="card-header">
                    <img src="images/icons8-list-60.png" alt="Icon" class="card-icon">
                    <h3>ƒê·ªï DS b·ªánh nh√¢n</h3>
                </div>
                <p class="card-description">ƒê·ªï danh s√°ch b·ªánh nh√¢n v√†o DataBase.</p>
                <div class="card-actions">
                    <a href="#" class="link-guide" onclick="openDodlGuideModal(); return false;">H∆∞·ªõng d·∫´n</a>
                    <!-- Chuy·ªÉn sang trang SQL_Server_Connection.html -->
                    <button class="btn btn-primary btn-download" onclick="goToDodlBN()">ƒê·ªï d·ªØ li·ªáu</button>
                </div>
            </div>

            <!-- ƒê·ªï danh s√°ch th·ªß thu·∫≠t   -->
            <div class="function-card">
                <div class="card-header">
                    <img src="images/icons8-to-do-list-60.png" alt="Icon" class="card-icon">
                    <h3>ƒê·ªï DS th·ªß thu·∫≠t</h3>
                </div>
                <p class="card-description">ƒê·ªï danh s√°ch th·ªß thu·∫≠t v√†o DataBase.</p>
                <div class="card-actions">
                    <a href="#" class="link-guide" onclick="openDoThuThuatGuideModal(); return false;">H∆∞·ªõng d·∫´n</a>
                    <button class="btn btn-primary btn-download" onclick="goToDoThuThuat()">ƒê·ªï d·ªØ li·ªáu</button>
                </div>
            </div>


            <!-- Xem l·∫°i danh s√°ch User  -->
            <div class="function-card">
                <div class="card-header">
                    <img src="images/icons8-password-window-60.png" alt="Icon" class="card-icon">
                    <h3>Qu√™n m·∫≠t kh·∫©u </h3>
                </div>
                <p class="card-description">Xem l·∫°i m·∫≠t kh·∫©u ƒë√£ ƒë·∫∑t cho t√†i kho·∫£n.</p>
                <div class="card-actions">
                    <a href="#" class="link-guide" onclick="openUserListGuideModal(); return false;">H∆∞·ªõng d·∫´n</a>
                    <button class="btn btn-primary btn-download" onclick="goToShowPass()">Show Pass</button>
                </div>
            </div>

            <!-- Xem l·∫°i danh s√°ch User  -->
            <div class="function-card">
                <div class="card-header">
                    <img src="images/icons8-command-60.png" alt="Icon" class="card-icon">
                    <h3>Run Stored SQL Online </h3>
                </div>
                <p class="card-description">Ch·∫°y Stored Procedure tr·ª±c tuy·∫øn.</p>
                <div class="card-actions">
                    <a href="#" class="link-guide" onclick="openStored_Procedure(); return false;">H∆∞·ªõng d·∫´n</a>
                    <button class="btn btn-primary btn-download" onclick="goToStored_Procedure()">Run Stored</button>
                </div>
            </div>

            <!-- Modal h∆∞·ªõng d·∫´n Xem l·∫°i danh s√°ch User -->
            <div id="userListGuideModal" class="modal-overlay">
                <div class="modal-content" style="max-width: 700px; background-color: #171c26;">
                    <div class="modal-header"
                        style="background-color: #1c222e; border-bottom: 1px solid #2e3547; padding: 20px 30px; display: flex; align-items: center;">
                        <img src="images/icons8-password-window-60.png" alt="Icon" class="modal-icon"
                            style="width: 36px; height: 36px; margin-right: 15px; object-fit: contain;">
                        <h2 style="color: white; font-size: 1.5em; font-weight: 600; margin: 0;">H∆∞·ªõng d·∫´n xem l·∫°i danh
                            s√°ch User</h2>
                    </div>

                    <div class="modal-body" style="padding: 30px; color: #e0e0e0;">

                        <div style="margin: 20px 0;">
                            <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8;">üéØ M·ª•c ƒë√≠ch</h3>
                            <p style="margin: 0; line-height: 1.6;">C√¥ng c·ª• n√†y gi√∫p b·∫°n xem l·∫°i to√†n b·ªô danh s√°ch t√†i
                                kho·∫£n ng∆∞·ªùi d√πng trong h·ªá th·ªëng, bao g·ªìm t√™n ƒëƒÉng nh·∫≠p, m·∫≠t kh·∫©u ƒë√£ ƒë·∫∑t, v√† quy·ªÅn h·∫°n.
                                ƒê·∫∑c bi·ªát h·ªØu √≠ch khi c·∫ßn tra c·ª©u m·∫≠t kh·∫©u ƒë√£ qu√™n ho·∫∑c ki·ªÉm tra th√¥ng tin t√†i kho·∫£n.</p>
                        </div>

                        <div style="margin: 20px 0;">
                            <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8;">üìã Th√¥ng tin hi·ªÉn th·ªã</h3>
                            <p style="margin: 0 0 8px; line-height: 1.6;">
                                ‚Ä¢ <strong>T√™n ƒëƒÉng nh·∫≠p:</strong> Username c·ªßa t·ª´ng t√†i kho·∫£n<br>
                                ‚Ä¢ <strong>M·∫≠t kh·∫©u:</strong> Password ƒë√£ ƒë∆∞·ª£c thi·∫øt l·∫≠p<br>
                                ‚Ä¢ <strong>H·ªç t√™n:</strong> T√™n ƒë·∫ßy ƒë·ªß c·ªßa ng∆∞·ªùi d√πng<br>
                            </p>
                        </div>

                        <div style="margin: 20px 0;">
                            <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8;">üîí B·∫£o m·∫≠t & L∆∞u √Ω</h3>
                            <p style="margin: 0; line-height: 1.6;">
                                ‚Ä¢ <strong>Ch·ªâ d√†nh cho qu·∫£n tr·ªã vi√™n:</strong> Y√™u c·∫ßu quy·ªÅn Admin ƒë·ªÉ s·ª≠ d·ª•ng<br>
                                ‚Ä¢ <strong>B·∫£o m·∫≠t th√¥ng tin:</strong> Kh√¥ng chia s·∫ª m·∫≠t kh·∫©u cho ng∆∞·ªùi kh√°c<br>
                                ‚Ä¢ <strong>ƒê·ªïi m·∫≠t kh·∫©u ƒë·ªãnh k·ª≥:</strong> N√™n thay ƒë·ªïi m·∫≠t kh·∫©u 3-6 th√°ng/l·∫ßn<br>
                                ‚Ä¢ <strong>X√≥a t√†i kho·∫£n c≈©:</strong> V√¥ hi·ªáu h√≥a t√†i kho·∫£n kh√¥ng c√≤n s·ª≠ d·ª•ng<br>
                                ‚Ä¢ <strong>Kh√¥ng screenshot:</strong> Tr√°nh l∆∞u h√¨nh ·∫£nh c√≥ ch·ª©a m·∫≠t kh·∫©u
                            </p>
                        </div>

                        <div style="margin: 20px 0;">
                            <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8;">‚ö†Ô∏è C·∫£nh b√°o quan tr·ªçng</h3>
                            <p style="margin: 0; line-height: 1.6;">
                                ‚Ä¢ C√¥ng c·ª• n√†y hi·ªÉn th·ªã m·∫≠t kh·∫©u d·∫°ng <strong>vƒÉn b·∫£n g·ªëc</strong><br>
                                ‚Ä¢ <strong>ƒê√≥ng c·ª≠a s·ªï</strong> ngay sau khi tra xong th√¥ng tin<br>
                                ‚Ä¢ Kh√¥ng ƒë·ªÉ ng∆∞·ªùi kh√°c nh√¨n th·∫•y m√†n h√¨nh khi ƒëang xem<br>
                                ‚Ä¢ S·ª≠ d·ª•ng trong <strong>m√¥i tr∆∞·ªùng an to√†n</strong>, kh√¥ng c√≥ camera<br>
                                ‚Ä¢ N·∫øu b·ªã l·ªô m·∫≠t kh·∫©u, c·∫ßn <strong>ƒë·ªïi ngay l·∫≠p t·ª©c</strong>
                            </p>
                        </div>

                        <div
                            style="margin: 20px 0; padding: 12px; background: rgba(255,193,7,0.15); border-left: 3px solid #ffc107; border-radius: 6px;">
                            <p style="margin: 0; font-size: 13px; line-height: 1.6;">
                                ‚ö° <strong>L∆∞u √Ω ph√°p l√Ω:</strong> Vi·ªác truy c·∫≠p v√† xem m·∫≠t kh·∫©u ng∆∞·ªùi d√πng ph·∫£i tu√¢n th·ªß
                                quy ƒë·ªãnh b·∫£o m·∫≠t c·ªßa b·ªánh vi·ªán/ph√≤ng kh√°m. Ch·ªâ s·ª≠ d·ª•ng khi c√≥ s·ª± ƒë·ªìng √Ω ho·∫∑c theo y√™u
                                c·∫ßu c√¥ng vi·ªác h·ª£p ph√°p.
                            </p>
                        </div>
                    </div>

                    <div class="modal-footer"
                        style="padding: 15px 30px; background-color: #1c222e; border-top: 1px solid #2e3547; display: flex; justify-content: flex-end; gap: 15px;">
                        <button class="btn btn-secondary close-modal" onclick="closeUserListGuideModal()">ƒê√≥ng</button>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <main class="dashboard-main-content">
        <div class="greeting-section">
            <h3>T·∫£i Video</h3>
        </div>
        <div class="card-grid">
            <!-- T·∫£i video Facebook  -->
            <div class="function-card">
                <div class="card-header">
                    <img src="images/icons8-download-60.png" alt="Icon" class="card-icon">
                    <h3>T·∫£i video Facebook</h3>
                </div>
                <p class="card-description">T·∫£i c√°c video t·ª´ Facebook.</p>
                <div class="card-actions">
                    <button class="btn btn-primary btn-download" onclick="OpengoToDoDownloadFB()">Download</button>
                </div>
            </div>
            <!-- T·∫£i video tiktok   -->
            <div class="function-card">
                <div class="card-header">
                    <img src="images/icons8-tiktok-60 (2).png" alt="Icon" class="card-icon">
                    <h3>T·∫£i video Tiktok</h3>
                </div>
                <p class="card-description">T·∫£i c√°c video t·ª´ Tiktok.</p>
                <div class="card-actions">
                    <button class="btn btn-primary btn-download" onclick="OpengoToDoDownloadTikTok()">Download</button>
                </div>
            </div>

            <!-- T·∫£i video Youtube   -->
            <div class="function-card">
                <div class="card-header">
                    <img src="images/icons8-youtube-70.png" alt="Icon" class="card-icon">
                    <h3>T·∫£i video Youtube</h3>
                </div>
                <p class="card-description">T·∫£i c√°c video t·ª´ Youtube.</p>
                <div class="card-actions">
                    <button class="btn btn-primary btn-download" onclick="OpengoToDoDownloadYTB()">Download</button>
                </div>
            </div>
        </div>
    </main>



    <!-- Modal h∆∞·ªõng d·∫´n ƒë·ªãnh d·∫°ng ng√†y gi·ªù -->
    <div id="guideModal" class="modal-overlay">
        <div class="modal-content" style="max-width: 700px; background-color: #171c26;">
            <div class="modal-header"
                style="background-color: #1c222e; border-bottom: 1px solid #2e3547; padding: 20px 30px; display: flex; align-items: center;">
                <img src="images/time.png" alt="Icon" class="modal-icon"
                    style="width: 36px; height: 36px; margin-right: 15px; object-fit: contain;">
                <h2 style="color: white; font-size: 1.5em; font-weight: 600; margin: 0;"> H∆∞·ªõng d·∫´n ƒë·ªãnh d·∫°ng ng√†y gi·ªù
                </h2>
            </div>

            <div class="modal-body" style="padding: 30px; color: #e0e0e0;">

                <div style="margin: 20px 0;">
                    <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8;">üéØ M·ª•c ƒë√≠ch</h3>
                    <p style="margin: 0; line-height: 1.6;">C√¥ng c·ª• n√†y gi√∫p c√†i ƒë·∫∑t ƒë·ªãnh d·∫°ng ng√†y gi·ªù, ng√¥n ng·ªØ v√†
                        v√πng mi·ªÅn ti·∫øng Vi·ªát cho Windows. Sau khi ch·∫°y, h·ªá th·ªëng s·∫Ω hi·ªÉn th·ªã ng√†y th√°ng, gi·ªù v√† c√°c ƒë·ªãnh
                        d·∫°ng s·ªë theo chu·∫©n Vi·ªát Nam.</p>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8;">‚öôÔ∏è C√°c thay ƒë·ªïi ƒë∆∞·ª£c √°p d·ª•ng</h3>
                    <p style="margin: 0 0 8px; line-height: 1.6;">
                        ‚Ä¢ <strong>ƒê·ªãnh d·∫°ng ng√†y:</strong> dd/MM/yyyy (31/12/2024)<br>
                        ‚Ä¢ <strong>ƒê·ªãnh d·∫°ng gi·ªù:</strong> 24 gi·ªù (HH:mm:ss)<br>
                        ‚Ä¢ <strong>Ng√¥n ng·ªØ hi·ªÉn th·ªã:</strong> Ti·∫øng Vi·ªát<br>
                        ‚Ä¢ <strong>V√πng mi·ªÅn:</strong> Vi·ªát Nam (GeoID: 235)<br>
                        ‚Ä¢ <strong>Ph√¢n c√°ch th·∫≠p ph√¢n:</strong> D·∫•u ph·∫©y (,)<br>
                        ‚Ä¢ <strong>Ph√¢n c√°ch h√†ng ngh√¨n:</strong> D·∫•u ch·∫•m (.)
                    </p>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8;">üìã C√°ch s·ª≠ d·ª•ng</h3>
                    <p style="margin: 0; line-height: 1.6;">
                        <strong>B∆∞·ªõc 1:</strong> Nh·∫•n n√∫t <strong>"T·∫£i xu·ªëng"</strong> ƒë·ªÉ t·∫£i file c√†i ƒë·∫∑t<br>
                        <strong>B∆∞·ªõc 2:</strong> M·ªü th∆∞ m·ª•c <strong>Downloads</strong><br>
                        <strong>B∆∞·ªõc 3:</strong> <strong>Nh·∫•p ƒë√∫p</strong> v√†o file
                        <code>SetVietnameseLocale.bat</code><br>
                        <strong>B∆∞·ªõc 4:</strong> Khi UAC h·ªèi quy·ªÅn, ch·ªçn <strong>"Yes"</strong><br>
                        <strong>B∆∞·ªõc 5:</strong> ƒê·ª£i ch∆∞∆°ng tr√¨nh ch·∫°y (kho·∫£ng 10-15 gi√¢y)<br>
                        <strong>B∆∞·ªõc 6:</strong> <strong>Kh·ªüi ƒë·ªông l·∫°i m√°y t√≠nh</strong> ƒë·ªÉ ho√†n t·∫•t
                    </p>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8;">‚ö†Ô∏è L∆∞u √Ω quan tr·ªçng</h3>
                    <p style="margin: 0; line-height: 1.6;">
                        ‚Ä¢ C·∫ßn quy·ªÅn <strong>Administrator</strong> ƒë·ªÉ th·ª±c hi·ªán<br>
                        ‚Ä¢ <strong>L∆∞u to√†n b·ªô c√¥ng vi·ªác</strong> tr∆∞·ªõc khi ch·∫°y<br>
                        ‚Ä¢ <strong>B·∫Øt bu·ªôc kh·ªüi ƒë·ªông l·∫°i</strong> ƒë·ªÉ c√†i ƒë·∫∑t c√≥ hi·ªáu l·ª±c<br>
                        ‚Ä¢ √Åp d·ª•ng cho t·∫•t c·∫£ ·ª©ng d·ª•ng tr√™n h·ªá th·ªëng<br>
                        ‚Ä¢ Kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn d·ªØ li·ªáu c√° nh√¢n
                    </p>
                </div>

                <div
                    style="margin: 20px 0; padding: 12px; background: rgba(0,194,168,0.1); border-left: 3px solid #00c2a8; border-radius: 6px;">
                    <p style="margin: 0; font-size: 13px; line-height: 1.6;">
                        üí° <strong>M·∫πo:</strong> N·∫øu g·∫∑p l·ªói "kh√¥ng th·ªÉ ch·∫°y script", h√£y nh·∫•p chu·ªôt ph·∫£i v√†o file ‚Üí
                        ch·ªçn <strong>"Run as administrator"</strong>
                    </p>
                </div>

            </div>

            <div class="modal-footer"
                style="padding: 15px 30px; background-color: #1c222e; border-top: 1px solid #2e3547; display: flex; justify-content: flex-end; gap: 15px;">
                <button class="btn btn-secondary close-modal" onclick="closeModal()">ƒê√≥ng</button>
                <button class="btn btn-primary btn-action-main"
                    onclick="closeModal(); /* th√™m h√†m download n·∫øu c·∫ßn */">T·∫£i xu·ªëng ngay</button>
            </div>
        </div>
    </div>

    <!-- Modal h∆∞·ªõng d·∫´n t·∫°o l·∫°i Admin -->
    <div id="adminGuideModal" class="modal-overlay">
        <div class="modal-content" style="max-width: 700px; background-color: #171c26;">
            <div class="modal-header"
                style="background-color: #1c222e; border-bottom: 1px solid #2e3547; padding: 20px 30px; display: flex; align-items: center;">
                <img src="images/icons8-user-60.png" alt="Icon" class="modal-icon"
                    style="width: 36px; height: 36px; margin-right: 15px; object-fit: contain;">
                <h2 style="color: white; font-size: 1.5em; font-weight: 600; margin: 0;">H∆∞·ªõng d·∫´n t·∫°o l·∫°i Admin</h2>
            </div>

            <div class="modal-body" style="padding: 30px; color: #e0e0e0;">

                <div style="margin: 20px 0;">
                    <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8;">üéØ M·ª•c ƒë√≠ch</h3>
                    <p style="margin: 0; line-height: 1.6;">Ch·ª©c nƒÉng n√†y gi√∫p b·∫°n t·∫°o l·∫°i t√†i kho·∫£n Admin c·ªßa ph·∫ßn m·ªÅm
                        khi b·∫°n b·ªã m·∫•t ho·∫∑c qu√™n m·∫≠t kh·∫©u t√†i kho·∫£n qu·∫£n tr·ªã g·ªëc. ƒêi·ªÅu n√†y ƒë·∫∑c bi·ªát h·ªØu √≠ch khi b·∫°n
                        kh√¥ng th·ªÉ ƒëƒÉng nh·∫≠p v√†o h·ªá th·ªëng qu·∫£n l√Ω.</p>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8;">üìã Khi n√†o c·∫ßn s·ª≠ d·ª•ng?</h3>
                    <p style="margin: 0 0 8px; line-height: 1.6;">
                        ‚Ä¢ Khi <strong>qu√™n m·∫≠t kh·∫©u</strong> t√†i kho·∫£n Admin<br>
                        ‚Ä¢ Khi t√†i kho·∫£n Admin b·ªã <strong>kh√≥a ho·∫∑c v√¥ hi·ªáu h√≥a</strong><br>
                        ‚Ä¢ Khi <strong>m·∫•t quy·ªÅn truy c·∫≠p</strong> v√†o h·ªá th·ªëng qu·∫£n tr·ªã<br>
                        ‚Ä¢ Khi c·∫ßn <strong>kh√¥i ph·ª•c quy·ªÅn qu·∫£n tr·ªã</strong> ban ƒë·∫ßu<br>
                        ‚Ä¢ Khi mu·ªën <strong>t·∫°o t√†i kho·∫£n Admin m·ªõi</strong> ƒë·ªÉ qu·∫£n l√Ω
                    </p>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8;">‚ö†Ô∏è L∆∞u √Ω quan tr·ªçng</h3>
                    <p style="margin: 0; line-height: 1.6;">
                        ‚Ä¢ T√†i kho·∫£n Admin m·ªõi s·∫Ω c√≥ <strong>to√†n quy·ªÅn qu·∫£n tr·ªã</strong> ph·∫ßn m·ªÅm<br>
                        ‚Ä¢ <strong>L∆∞u m·∫≠t kh·∫©u</strong> ngay sau khi t·∫°o ƒë·ªÉ tr√°nh m·∫•t l·∫°i<br>
                        ‚Ä¢ N√™n <strong>x√≥a t√†i kho·∫£n c≈©</strong> sau khi ƒë√£ truy c·∫≠p ƒë∆∞·ª£c h·ªá th·ªëng<br>
                        ‚Ä¢ Kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn <strong>d·ªØ li·ªáu ng∆∞·ªùi d√πng</strong> hi·ªán c√≥<br>
                        ‚Ä¢ Ch·ªâ t·∫°o l·∫°i t√†i kho·∫£n qu·∫£n tr·ªã, kh√¥ng reset d·ªØ li·ªáu
                    </p>
                </div>

                <div
                    style="margin: 20px 0; padding: 12px; background: rgba(0,194,168,0.1); border-left: 3px solid #00c2a8; border-radius: 6px;">
                    <p style="margin: 0; font-size: 13px; line-height: 1.6;">
                        üí° <strong>M·∫πo b·∫£o m·∫≠t:</strong> S·ª≠ d·ª•ng m·∫≠t kh·∫©u k·∫øt h·ª£p ch·ªØ hoa, ch·ªØ th∆∞·ªùng, s·ªë v√† k√Ω t·ª± ƒë·∫∑c
                        bi·ªát. V√≠ d·ª•: <code>Admin@2024#Secure</code>
                    </p>
                </div>

            </div>

            <div class="modal-footer"
                style="padding: 15px 30px; background-color: #1c222e; border-top: 1px solid #2e3547; display: flex; justify-content: flex-end; gap: 15px;">
                <button class="btn btn-secondary close-modal" onclick="closeAdminGuideModal()">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <!-- Modal h∆∞·ªõng d·∫´n ƒê·ªï danh s√°ch b·ªánh nh√¢n -->
    <div id="dodlGuideModal" class="modal-overlay">
        <div class="modal-content" style="max-width: 700px; background-color: #171c26;">
            <div class="modal-header"
                style="background-color: #1c222e; border-bottom: 1px solid #2e3547; padding: 20px 30px; display: flex; align-items: center;">
                <img src="images/icons8-list-60.png" alt="Icon" class="modal-icon"
                    style="width: 36px; height: 36px; margin-right: 15px; object-fit: contain;">
                <h2 style="color: white; font-size: 1.5em; font-weight: 600; margin: 0;">H∆∞·ªõng d·∫´n ƒë·ªï danh s√°ch b·ªánh
                    nh√¢n</h2>
            </div>

            <div class="modal-body" style="padding: 30px; color: #e0e0e0;">

                <div style="margin: 20px 0;">
                    <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8;">üéØ M·ª•c ƒë√≠ch</h3>
                    <p style="margin: 0; line-height: 1.6;">Nh·∫≠p to√†n b·ªô danh s√°ch b·ªánh nh√¢n t·ª´ file Excel v√†o c∆° s·ªü d·ªØ
                        li·ªáu SQL Server.</p>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8;">‚öôÔ∏è Y√™u c·∫ßu tr∆∞·ªõc khi th·ª±c hi·ªán</h3>
                    <p style="margin: 0 0 8px; line-height: 1.6;">
                        ‚Ä¢ File Excel m·∫´u: <strong>DS_BenhNhan.xlsx</strong> (ƒë√£ ƒë∆∞·ª£c cung c·∫•p)<br>
                        ‚Ä¢ SQL Server ƒëang ch·∫°y v√† cho ph√©p k·∫øt n·ªëi<br>
                        ‚Ä¢ T√†i kho·∫£n SQL c√≥ quy·ªÅn <strong>db_owner</strong> tr√™n database NKS<br>
                        ‚Ä¢ M√°y t√≠nh ƒë√£ c√†i .NET Framework 4.7.2 tr·ªü l√™n
                    </p>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8;">üìã C√°c b∆∞·ªõc th·ª±c hi·ªán</h3>
                    <p style="margin: 0; line-height: 1.6;">
                        <strong>1.</strong> Nh·∫•n n√∫t <strong>‚Äúƒê·ªï d·ªØ li·ªáu‚Äù</strong> ‚Üí chuy·ªÉn sang trang k·∫øt n·ªëi<br>
                        <strong>2.</strong> Nh·∫≠p th√¥ng tin Server, Database, User, Password<br>
                        <strong>3.</strong> Ch·ªçn file Excel <code>DS_BenhNhan.xlsx</code><br>
                        <strong>4.</strong> Nh·∫•n <strong>‚ÄúB·∫Øt ƒë·∫ßu ƒë·ªï d·ªØ li·ªáu‚Äù</strong><br>
                        <strong>5.</strong> ƒê·ª£i th√¥ng b√°o <strong>‚ÄúHo√†n t·∫•t‚Äù</strong> (th∆∞·ªùng 5-30 gi√¢y t√πy s·ªë l∆∞·ª£ng)
                    </p>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8;">‚ö†Ô∏è L∆∞u √Ω quan tr·ªçng</h3>
                    <p style="margin: 0; line-height: 1.6;">
                        ‚Ä¢ Kh√¥ng ch·ªânh s·ª≠a c·∫•u tr√∫c c·ªôt trong file Excel m·∫´u<br>
                        ‚Ä¢ D·ªØ li·ªáu kh√¥ng c√≥ <strong> VUI L√íNG ƒê√ÅNH # </strong> ƒë·ªÉ wed t·ª± t√≠nh d·ªØ li·ªáu ph√π h·ª£p<br>
                        ‚Ä¢ Sao l∆∞u database tr∆∞·ªõc khi th·ª±c hi·ªán (khuy·∫øn c√°o)<br>
                        ‚Ä¢ Ch·ªâ ch·∫°y 1 l·∫ßn cho m·ªói ƒë·ª£t c·∫≠p nh·∫≠t danh s√°ch
                    </p>
                </div>

                <div
                    style="margin: 20px 0; padding: 12px; background: rgba(0,194,168,0.1); border-left: 3px solid #00c2a8; border-radius: 6px;">
                    <p style="margin: 0; font-size: 13px; line-height: 1.6;">
                        üí° <strong>M·∫πo:</strong> N·∫øu g·∫∑p l·ªói k·∫øt n·ªëi, ki·ªÉm tra SQL Server Configuration Manager ‚Üí SQL
                        Server Network Configuration ‚Üí Protocols ‚Üí b·∫≠t TCP/IP v√† Named Pipes.
                    </p>
                </div>

            </div>

            <div class="modal-footer"
                style="padding: 25px 30px; background-color: #1c222e; border-top: 1px solid #2e3547; display: flex; justify-content: space-between; align-items: center;">
                <a href="files/DS_BenhNhan.xlsx" download="DS_BenhNhan.xlsx" target="_blank" class="btn btn-primary"
                    style="background: linear-gradient(135deg, #2d3748, #1a202c);
          color: #e2e8f0;
          padding: 11px 24px;
          font-size: 15px;
          font-weight: 700;
          text-shadow: 0 1px 2px rgba(0,0,0,0.6);
          border: 1px solid #4a5568;
          border-radius: 10px;
          box-shadow: 0 5px 15px rgba(0,0,0,0.4);
          text-decoration: none;
          display: inline-flex;
          align-items: center;
          gap: 10px;
          transition: all 0.3s ease;"
                    onmouseover="this.style.background='linear-gradient(135deg, #4a5568, #2d3748)'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 20px rgba(0,0,0,0.6)'"
                    onmouseout="this.style.background='linear-gradient(135deg, #2d3748, #1a202c)'; this.style.transform='translateY(0)'; this.style.boxShadow='0 5px 15px rgba(0,0,0,0.4)'">

                    <span style="font-size: 22px;">‚Üì</span>
                    T·∫£i m·∫´u Excel
                </a>

                <button class="btn btn-secondary close-modal" onclick="closeDodlGuideModal()"
                    style="padding: 14px 32px; border-radius: 10px; background: #2d3748; color: #e2e8f0; border: 1px solid #4a5568;">
                    ƒê√≥ng
                </button>
            </div>

        </div>
    </div>

    <!-- Modal h∆∞·ªõng d·∫´n ƒê·ªï danh s√°ch th·ªß thu·∫≠t -->
    <div id="dothuthuatGuideModal" class="modal-overlay">
        <div class="modal-content" style="max-width: 700px; background-color: #171c26;">
            <div class="modal-header"
                style="background-color: #1c222e; border-bottom: 1px solid #2e3547; padding: 20px 30px; display: flex; align-items: center;">
                <img src="images/icons8-to-do-list-60.png" alt="Icon" class="modal-icon"
                    style="width: 36px; height: 36px; margin-right: 15px; object-fit: contain;">
                <h2 style="color: white; font-size: 1.5em; font-weight: 600; margin: 0;">H∆∞·ªõng d·∫´n ƒë·ªï danh s√°ch th·ªß
                    thu·∫≠t</h2>
            </div>

            <div class="modal-body" style="padding: 30px; color: #e0e0e0;">

                <div style="margin: 20px 0;">
                    <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8;">üéØ M·ª•c ƒë√≠ch</h3>
                    <p style="margin: 0; line-height: 1.6;">Nh·∫≠p to√†n b·ªô danh s√°ch th·ªß thu·∫≠t t·ª´ file Excel v√†o c∆° s·ªü d·ªØ
                        li·ªáu SQL Server c·ªßa ph·∫ßn m·ªÅm NKS.</p>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8;">‚öôÔ∏è Y√™u c·∫ßu tr∆∞·ªõc khi th·ª±c hi·ªán</h3>
                    <p style="margin: 0 0 8px; line-height: 1.6;">
                        ‚Ä¢ File Excel m·∫´u: <strong>DS_ThuThuat.xlsx</strong> (ƒë√£ ƒë∆∞·ª£c cung c·∫•p)<br>
                        ‚Ä¢ SQL Server ƒëang ch·∫°y v√† cho ph√©p k·∫øt n·ªëi<br>
                        ‚Ä¢ T√†i kho·∫£n SQL c√≥ quy·ªÅn <strong>db_owner</strong> tr√™n database NKS<br>
                        ‚Ä¢ M√°y t√≠nh ƒë√£ c√†i .NET Framework 4.7.2 tr·ªü l√™n <br>
                        ‚Ä¢ Sau khi ƒë·ªï d·ªØ li·ªáu xong s·∫Ω c√≥ <strong> Nh√≥m Th·ªß Thu·∫≠t ƒê·ªï D·ªØ Li·ªáu </strong>
                    </p>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8;">üìã C√°c b∆∞·ªõc th·ª±c hi·ªán</h3>
                    <p style="margin: 0; line-height: 1.6;">
                        <strong>1.</strong> Nh·∫•n n√∫t <strong>‚Äúƒê·ªï d·ªØ li·ªáu‚Äù</strong> ‚Üí chuy·ªÉn sang trang k·∫øt n·ªëi<br>
                        <strong>2.</strong> Nh·∫≠p th√¥ng tin Server, Database, User, Password<br>
                        <strong>3.</strong> Ch·ªçn file Excel <code>DS_ThuThuat.xlsx</code><br>
                        <strong>4. <strong> D·ªØ li·ªáu kh√¥ng c√≥ vui l√≤ng ƒë√°nh # ƒë·ªÉ web t·ª± t√≠nh d·ªØ li·ªáu ph√π h·ª£p<br>
                                <strong>5.</strong> Nh·∫•n <strong>‚ÄúB·∫Øt ƒë·∫ßu ƒë·ªï d·ªØ li·ªáu‚Äù</strong><br>
                                <strong>6.</strong> ƒê·ª£i th√¥ng b√°o <strong>‚ÄúHo√†n t·∫•t‚Äù</strong>
                    </p>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8;">‚ö†Ô∏è L∆∞u √Ω quan tr·ªçng</h3>
                    <p style="margin: 0; line-height: 1.6;">
                        ‚Ä¢ Kh√¥ng thay ƒë·ªïi t√™n c·ªôt ho·∫∑c c·∫•u tr√∫c file m·∫´u<br>
                        ‚Ä¢ Sao l∆∞u database tr∆∞·ªõc khi th·ª±c hi·ªán<br>
                        ‚Ä¢ Ch·ªâ ƒë·ªï d·ªØ li·ªáu 1 l·∫ßn cho m·ªói ƒë·ª£t c·∫≠p nh·∫≠t<br>
                        ‚Ä¢ N·∫øu ƒë√£ c√≥ d·ªØ li·ªáu c≈©, n√™n x√≥a b·∫£ng th·ªß thu·∫≠t tr∆∞·ªõc khi ƒë·ªï m·ªõi
                    </p>
                </div>

                <div
                    style="margin: 20px 0; padding: 12px; background: rgba(0,194,168,0.1); border-left: 3px solid #00c2a8; border-radius: 6px;">
                    <p style="margin: 0; font-size: 13px; line-height: 1.6;">
                        üí° <strong>M·∫πo:</strong> N·∫øu l·ªói k·∫øt n·ªëi, ki·ªÉm tra SQL Server Configuration Manager ‚Üí b·∫≠t TCP/IP
                        v√† Named Pipes.
                    </p>
                </div>

            </div>

            <div class="modal-footer"
                style="padding: 25px 30px; background-color: #1c222e; border-top: 1px solid #2e3547; display: flex; justify-content: space-between; align-items: center;">
                <a href="files/DS_ThuThuat.xlsx" download="DS_ThuThuat.xlsx" target="_blank" class="btn btn-primary"
                    style="background: linear-gradient(135deg, #2d3748, #1a202c); color: #e2e8f0; padding: 11px 24px; font-size: 15px; font-weight: 700; text-shadow: 0 1px 2px rgba(0,0,0,0.6); border: 1px solid #4a5568; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.4); text-decoration: none; display: inline-flex; align-items: center; gap: 10px; transition: all 0.3s ease;"
                    onmouseover="this.style.background='linear-gradient(135deg, #4a5568, #2d3748)'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 20px rgba(0,0,0,0.6)'"
                    onmouseout="this.style.background='linear-gradient(135deg, #2d3748, #1a202c)'; this.style.transform='translateY(0)'; this.style.boxShadow='0 5px 15px rgba(0,0,0,0.4)'">
                    <span style="font-size: 22px;">‚Üì</span> T·∫£i m·∫´u Excel
                </a>
                <button class="btn btn-secondary close-modal" onclick="closeDoThuThuatGuideModal()"
                    style="padding: 14px 32px; border-radius: 10px; background: #2d3748; color: #e2e8f0; border: 1px solid #4a5568;">
                    ƒê√≥ng
                </button>
            </div>
        </div>
    </div>

<!-- Modal h∆∞·ªõng d·∫´n ch·∫°y Stored Procedure tr·ª±c tuy·∫øn cho SQL Server -->
<div id="spGuideModal" class="modal-overlay">
    <div class="modal-content" style="max-width: 700px; background-color: #171c26;">
        <div class="modal-header" style="background-color: #1c222e; border-bottom: 1px solid #2e3547; padding: 20px 30px; display: flex; align-items: center;">
            <img src="images/icons8-command-60.png" alt="Icon" class="modal-icon" style="width: 36px; height: 36px; margin-right: 15px; object-fit: contain;">
            <h2 style="color: white; font-size: 1.5em; font-weight: normal; margin: 0;">H∆∞·ªõng d·∫´n ch·∫°y Stored Procedure</h2>
        </div>

        <div class="modal-body" style="padding: 30px; color: #e0e0e0;">

            <div style="margin: 20px 0;">
                <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8; font-weight: normal;">üéØ M·ª•c ƒë√≠ch</h3>
                <p style="margin: 0; line-height: 1.6; font-weight: normal;">H∆∞·ªõng d·∫´n th·ª±c thi Stored Procedure tr√™n SQL Server tr·ª±c tuy·∫øn Online.</p>
            </div>

            <div style="margin: 20px 0;">
                <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8; font-weight: normal;">üìã Khi n√†o c·∫ßn s·ª≠ d·ª•ng?</h3>
                <p style="margin: 0 0 8px; line-height: 1.6; font-weight: normal;">
                    ‚Ä¢ Khi c·∫ßn ki·ªÉm tra nhanh Stored Procedure<br>
                    ‚Ä¢ Khi kh√¥ng c√≥ quy·ªÅn c√†i ƒë·∫∑t SSMS tr√™n m√°y<br>
                    ‚Ä¢ Khi l√†m vi·ªác t·ª´ xa ho·∫∑c tr√™n thi·∫øt b·ªã kh√°c<br>
                    ‚Ä¢ Khi c·∫ßn ch·∫°y th·ª≠ tr∆∞·ªõc khi tri·ªÉn khai<br>
                    ‚Ä¢ Khi h·ªó tr·ª£ kh√°ch h√†ng th·ª±c thi SP
                </p>
            </div>

            <div style="margin: 20px 0;">
                <h3 style="font-size: 16px; margin: 16px 0 8px; color: #00c2a8; font-weight: normal;">‚ö†Ô∏è L∆∞u √Ω quan tr·ªçng</h3>
                <p style="margin: 0; line-height: 1.6; font-weight: normal;">
                    ‚Ä¢ C·∫ßn c√≥ chu·ªói k·∫øt n·ªëi v√† quy·ªÅn th·ª±c thi SP<br>
                    ‚Ä¢ Kh√¥ng s·ª≠ d·ª•ng c√¥ng c·ª• online cho d·ªØ li·ªáu nh·∫°y c·∫£m<br>
                    ‚Ä¢ Ki·ªÉm tra k·ªπ tham s·ªë ƒë·∫ßu v√†o tr∆∞·ªõc khi ch·∫°y<br>
                    ‚Ä¢ M·ªôt s·ªë c√¥ng c·ª• online c√≥ gi·ªõi h·∫°n th·ªùi gian th·ª±c thi<br>
                    ‚Ä¢ Lu√¥n sao l∆∞u d·ªØ li·ªáu tr∆∞·ªõc khi ch·∫°y SP thay ƒë·ªïi d·ªØ li·ªáu
                </p>
            </div>

            <div style="margin: 20px 0; padding: 12px; background: rgba(0,194,168,0.1); border-left: 3px solid #00c2a8; border-radius: 6px;">
                <p style="margin: 0; font-size: 13px; line-height: 1.6; font-weight: normal;">
                    üí° C√¥ng c·ª• khuy·∫øn ngh·ªã: Azure Data Studio (web version), SQL Fiddle, db<>fiddle, ho·∫∑c Adminer v·ªõi k·∫øt n·ªëi SQL Server.
                </p>
            </div>

        </div>

        <div class="modal-footer" style="padding: 15px 30px; background-color: #1c222e; border-top: 1px solid #2e3547; display: flex; justify-content: flex-end; gap: 15px;">
            <button class="btn btn-secondary close-modal" onclick="closeStored_Procedure()">ƒê√≥ng</button>
        </div>
    </div>
</div>

    <!-- Modal t·∫£i video Facebook ‚Äì K·∫øt qu·∫£ hi·ªÉn th·ªã ngay d∆∞·ªõi n√∫t Download -->
    <div id="fbDownloadModal" class="modal-overlay">
        <div class="modal-content"
            style="position:relative; max-width:600px; background:#fff; border-radius:16px; overflow:hidden; box-shadow:0 20px 40px rgba(0,0,0,0.15);">

            <!-- N√∫t ƒë√≥ng (X) -->
            <button onclick="closeToDoDownloadFB()"
                style="position:absolute; top:16px; right:20px; z-index:10; width:36px; height:36px; background:#fff; border:none; border-radius:50%; font-size:24px; color:#888; cursor:pointer; box-shadow:0 2px 8px rgba(0,0,0,0.1); transition:all 0.2s;">
                √ó
            </button>

            <!-- Header -->
            <div style="padding:30px 40px 20px; text-align:center;">
                <h2 style="font-size:28px; font-weight:700; color:#1a1a1a; margin:0 0 8px;">Download Facebook Videos
                </h2>
                <p style="color:#666; margin:0 0 30px; font-size:15px;">Enter a Facebook video URL and select your
                    preferred quality</p>
            </div>

            <!-- Form ch√≠nh (input + n√∫t + k·∫øt qu·∫£) -->
            <div style="padding:0 40px 40px;">

                <!-- Input URL -->
                <div style="margin-bottom:20px;">
                    <label style="display:block; margin-bottom:8px; font-weight:600; color:#333;">Facebook Video
                        URL</label>
                    <input type="text" id="fbVideoUrl" placeholder="https://www.facebook.com/watch?v=..."
                        style="width:100%; padding:16px; border-radius:12px; border:1px solid #ddd; background:#f9f9f9; font-size:16px; color:#333;"
                        onkeypress="if(event.key==='Enter') fetchFBInfo()">
                </div>

                <!-- N√∫t Download ƒë·∫πp + hi·ªáu ·ª©ng -->
                <button onclick="fetchFBInfo()"
                    style="width:100%; padding:18px; background:#1877f2; color:#fff; font-size:18px; font-weight:600; border:none; border-radius:12px; cursor:pointer; 
                       box-shadow:0 4px 15px rgba(24,119,242,0.4); transition:all 0.3s ease; position:relative; overflow:hidden;"
                    onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 25px rgba(24,119,242,0.5)'"
                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(24,119,242,0.4)'">
                    Download Video
                </button>

                <!-- Khu v·ª±c hi·ªÉn th·ªã k·∫øt qu·∫£ ‚Äì ngay b√™n d∆∞·ªõi n√∫t Download -->
                <div id="fbVideoInfo" style="margin-top:30px; display:none;">
                    <!-- N·ªôi dung s·∫Ω ƒë∆∞·ª£c JS ch√®n v√†o ƒë√¢y -->
                </div>
            </div>
        </div>
    </div>
    <!-- // JavaScript ƒë·ªÉ x·ª≠ l√Ω t·∫£i video Facebook -->
    <script>
        async function fetchFBInfo() {
            const url = document.getElementById('fbVideoUrl').value.trim();
            if (!url) return alert('Vui l√≤ng nh·∫≠p link video Facebook!');

            const quality = document.querySelector('input[name="quality"]:checked')?.value || 'best';
            const btn = document.querySelector('button[onclick="fetchFBInfo()"]');
            const oldText = btn.innerHTML;

            btn.disabled = true;
            btn.innerHTML = 'ƒêang x·ª≠ l√Ω‚Ä¶';

            const resultDiv = document.getElementById('fbVideoInfo');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `<div style="text-align:center;padding:50px 0;"><div style="width:56px;height:56px;border:6px solid #1877f2;border-top-color:transparent;border-radius:50%;margin:0 auto 20px;animation:spin 1s linear infinite;"></div><p>ƒêang l·∫•y video‚Ä¶</p></div>`;

            try {
                const res = await fetch('https://facebook-video-download-api.onrender.com/download', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ url, quality })
                });

                const data = await res.json();
                btn.disabled = false;
                btn.innerHTML = oldText;

                if (data.status !== 'success' || !data.video_info || !data.download_url) {
                    resultDiv.innerHTML = `<div style="background:#ffebee;color:#c62828;padding:20px;border-radius:12px;text-align:center;">Kh√¥ng th·ªÉ t·∫£i video n√†y.<br><small>${data.message || 'Link kh√¥ng h·ª£p l·ªá ho·∫∑c video b·ªã h·∫°n ch·∫ø.'}</small></div>`;
                    return;
                }

                const v = data.video_info;
                const date = v.upload_date ? v.upload_date.replace(/(\d{4})(\d{2})(\d{2})/, '$3/$2/$1') : '';
                const safeTitle = (v.title || 'Facebook_Video').replace(/[^a-zA-Z0-9]/g, '_').substring(0, 60);

                resultDiv.innerHTML = `
            <div style="background:#f8f9fa;border-radius:16px;padding:24px;text-align:center;box-shadow:0 4px 20px rgba(0,0,0,0.08);">
                ${v.thumbnail ? `<img src="${v.thumbnail}" style="width:100%;height:320px;object-fit:cover;border-radius:16px;margin-bottom:20px;box-shadow:0 12px 30px rgba(0,0,0,0.2);background:#000;" alt="Thumbnail">` : ''}

                <h3 style="margin:12px 0;font-size:19px;color:#1a1a1a;line-height:1.4;font-weight:600;">
                    ${v.title || 'Video Facebook'}
                </h3>
                <p style="color:#65676b;margin:8px 0 24px;font-size:15px;">
                    <strong>${v.uploader || 'Ng∆∞·ªùi d√πng Facebook'}</strong> ‚Ä¢ 
                    ${new Intl.NumberFormat('vi-VN').format(v.view_count || 0)} l∆∞·ª£t xem ‚Ä¢ ${date}
                </p>

                <!-- 2 N√öT N·∫∞M C√ôNG 1 D√íNG ƒê·∫∏P -->
                <div style="display:flex; gap:16px; justify-content:center; flex-wrap:wrap; margin-bottom:16px;">
                    <!-- N√∫t T·∫£i xu·ªëng -->
                    <button id="downloadBtnMain" onclick="downloadVideo('${data.download_url}', '${safeTitle}_${quality}.mp4')"
                        style="flex:1; min-width:220px; padding:16px; background:#00c853; color:#fff; font-size:18px; font-weight:700; border:none; border-radius:12px; cursor:pointer; box-shadow:0 8px 25px rgba(0,200,83,0.4); transition:all .3s;"
                        onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 14px 35px rgba(0,200,83,0.5)'"
                        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 25px rgba(0,200,83,0.4)'">
                        T·∫£i xu·ªëng ngay 
                    </button>

                    <!-- N√∫t T·∫£i video kh√°c -->
                    <button onclick="resetForm()"
                        style="flex:1; min-width:180px; padding:16px; background:#1877f2; color:#fff; font-size:16px; font-weight:600; border:none; border-radius:12px; cursor:pointer; transition:.3s;"
                        onmouseover="this.style.background='#166fe5'"
                        onmouseout="this.style.background='#1877f2'">
                        T·∫£i video kh√°c
                    </button>
                </div>

                <!-- Th√¥ng b√°o th√†nh c√¥ng ƒë·∫πp + g·ªçn -->
                <div id="downloadSuccessToast" style="padding:14px 20px; background:#e8f5e8; border-radius:10px; color:#1e7e34; font-weight:600; display:none; align-items:center; gap:10px; font-size:15px;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg>
                    ƒê√£ t·∫£i xong video !
                </div>
            </div>`;

                resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });

            } catch (error) {
                btn.disabled = false;
                btn.innerHTML = oldText;
                resultDiv.innerHTML = `<div style="background:#ffebee;color:#c62828;padding:20px;border-radius:12px;text-align:center;">L·ªói k·∫øt n·ªëi server. Th·ª≠ l·∫°i sau.</div>`;
            }
        }

        // T·∫£i video + hi·ªán th√¥ng b√°o ƒë·∫πp
        async function downloadVideo(videoUrl, filename) {
            const btn = document.getElementById('downloadBtnMain');
            const toast = document.getElementById('downloadSuccessToast');

            btn.disabled = true;
            btn.innerHTML = 'ƒêang t·∫£i‚Ä¶';

            try {
                const response = await fetch(videoUrl);
                if (!response.ok) throw new Error();

                const blob = await response.blob();
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                a.style.display = 'none';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);

                // Hi·ªán th√¥ng b√°o th√†nh c√¥ng ƒë·∫πp
                btn.style.background = '#1e7e34';
                btn.innerHTML = 'ƒê√£ t·∫£i xong!';
                toast.style.display = 'flex';

                // T·ª± ·∫©n sau 4 gi√¢y
                setTimeout(() => {
                    toast.style.opacity = '0';
                    toast.style.transform = 'translateY(-10px)';
                    toast.style.transition = 'all 0.5s ease';
                    setTimeout(() => toast.style.display = 'none', 500);
                }, 4000);

            } catch (err) {
                alert('Kh√¥ng th·ªÉ t·∫£i video. H√£y th·ª≠ chu·ªôt ph·∫£i ‚Üí L∆∞u li√™n k·∫øt d∆∞·ªõi d·∫°ng...');
                btn.disabled = false;
                btn.innerHTML = `T·∫£i xu·ªëng ngay (${quality?.toUpperCase() || 'BEST'})`;
            }
        }

        function resetForm() {
            document.getElementById('fbVideoUrl').value = '';
            document.getElementById('fbVideoInfo').style.display = 'none';
            document.getElementById('fbVideoUrl').focus();
        }

        function closeToDoDownloadFB() {
            document.getElementById('fbDownloadModal').style.display = 'none';
        }

        // Animation
        document.head.insertAdjacentHTML('beforeend', `
<style>
    @keyframes spin { to { transform: rotate(360deg); } }
    #downloadSuccessToast { transition: all 0.5s ease; }
</style>`);
    </script>
    <!-- JS t·∫°o hi·ªáu ·ª©ng ripple ch√≠nh x√°c t·∫°i v·ªã tr√≠ click -->
    <script>
        document.querySelector('button[onclick="fetchFBInfo()"]').addEventListener('click', function (e) {
            let button = e.currentTarget;
            let ripple = button.querySelector('span');
            if (!ripple) {
                ripple = document.createElement('span');
                button.appendChild(ripple);
            }

            let x = e.clientX - button.getBoundingClientRect().left;
            let y = e.clientY - button.getBoundingClientRect().top;

            ripple.style.width = ripple.style.height = '300px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            ripple.classList.remove('animate');
            void ripple.offsetWidth; // trigger reflow
            ripple.classList.add('animate');
        });
    </script>
    <!-- //C√°c x·ª≠ l√Ω kh√°c  -->
    <script>
        function goToStored_Procedure() {
            window.location.href = "Stored_Procedure.html"; // ho·∫∑c trang t∆∞∆°ng ·ª©ng
        }

    // Modal FB
    function openStored_Procedure() {
        document.getElementById('spGuideModal').style.display = 'flex';
    }
     function closeStored_Procedure() {
        document.getElementById('spGuideModal').style.display = 'none';
    }

        function OpengoToDoDownloadYTB() {
            window.location.href = "Youtube_Download.html"; // ho·∫∑c trang t∆∞∆°ng ·ª©ng
        }


        function OpengoToDoDownloadTikTok() {
            window.location.href = "Video_TikTok.html"; // ho·∫∑c trang t∆∞∆°ng ·ª©ng
        }

        // Modal FB
        function OpengoToDoDownloadFB() {
            document.getElementById('fbDownloadModal').style.display = 'flex';
        }
        function closeToDoDownloadFB() {
            document.getElementById('fbDownloadModal').style.display = 'none';
        }

        function goToDoThuThuat() {
            window.location.href = "DoDL_ThuThuat.html"; // ho·∫∑c trang t∆∞∆°ng ·ª©ng
        }
        // Modal ƒê·ªï danh s√°ch th·ªß thu·∫≠t
        function openDoThuThuatGuideModal() {
            document.getElementById('dothuthuatGuideModal').style.display = 'flex';
        }

        function closeDoThuThuatGuideModal() {
            document.getElementById('dothuthuatGuideModal').style.display = 'none';
        }

        // === Modal ƒê·ªãnh d·∫°ng ng√†y gi·ªù ===
        function openGuideModal() {
            document.getElementById('guideModal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('guideModal').style.display = 'none';
        }

        // === Modal T·∫°o l·∫°i Admin ===
        function openAdminGuideModal() {
            document.getElementById('adminGuideModal').style.display = 'flex';
        }

        function closeAdminGuideModal() {
            document.getElementById('adminGuideModal').style.display = 'none';
        }

        // === Modal ƒê·ªï danh s√°ch b·ªánh nh√¢n ===
        function openDodlGuideModal() {
            document.getElementById('dodlGuideModal').style.display = 'flex';
        }

        function closeDodlGuideModal() {
            document.getElementById('dodlGuideModal').style.display = 'none';
        }

        // === Modal Xem l·∫°i danh s√°ch User ===
        function openUserListGuideModal() {
            document.getElementById('userListGuideModal').style.display = 'flex';
        }

        function closeUserListGuideModal() {
            document.getElementById('userListGuideModal').style.display = 'none';
        }

        // ƒê√≥ng khi click b√™n ngo√†i modal
        window.addEventListener('click', function (e) {
            if (e.target.classList.contains('modal-overlay')) {
                e.target.style.display = 'none';
            }
        });

        // Chuy·ªÉn trang
        function goToCreateAdminPage() {
            window.location.href = "SQL_Server_Connection.html";
        }

        function goToDodlBN() {
            window.location.href = "DoDL_BenhNhan.html";
        }
        function goToShowPass() {
            window.location.href = "Show_Pass.html";
        }
    </script>
    <script src="dashboard.js"></script>
</body>

</html>